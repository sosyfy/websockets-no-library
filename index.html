<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sockets</title>
</head>
<body>
    <div id="messages"></div>
   
     <script>
         const messages = document.getElementById("messages")
         
         const socket = new WebSocket('ws://localhost:3006')

         socket.onopen = (event)=> {  
            console.log("connected to websocket server")
            const data = JSON.stringify({
              name: "peter"
            })
           
           socket.send(data)
         }
         socket.onmessage = (msg)=> { 
            console.log(msg)
            messages.innerHTML  = `<h1>${msg.data}</h1>`
        }
         socket.onerror =  (error) => { console.error(`websocket error from  ${error}`)}
         socket.onclose = (event)=> { console.log("Disconnected from websocket server") }

     </script>
</body>
</html>